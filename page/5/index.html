<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#33363b">
    <meta name="msapplication-TileColor" content="#33363b">
    
    
    
    <meta name="keywords" content="自然语言处理, 人工智能, 图像识别, 信息检索">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="chenying99'blog" type="application/atom+xml" />
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>chenying99'blog - 君子博学而日参省乎己，则知明而行无过矣</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"  data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #33363b;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">chenying99'blog</a></h1>
        <h2 class="subtitle">君子博学而日参省乎己，则知明而行无过矣</h2>
      </div>
      
      <div class="logo">
        <img src="/images/logo.png" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="切换导航栏"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/">首页</a></li>
        
        <li role="menuitem"><a href="/archives/">归档</a></li>
        
        <li role="menuitem"><a href="/categories/">分类</a></li>
        
        <li role="menuitem"><a href="/tags/">标签</a></li>
        
        <li role="menuitem"><a href="/about/">关于</a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            

<div id="index" class="index page">
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/01/opencv4-0-0图像处理：图像直方图（七）/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/06/01/opencv4-0-0图像处理：图像直方图（七）/" itemprop="url">opencv4.0.0图像处理：图像直方图（七）</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-06-01T17:00:17+08:00">2019-06-01 17:00:17</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>图像直方图反映了图像像素的密度分布,下面是BGR图像三通道的直方图测试 </p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        Mat hello =Imgcodecs.imread(<span class="string">"data/lena.jpg"</span>);        </span><br><span class="line">        List&lt;Mat&gt; bgrPlanes = <span class="keyword">new</span> ArrayList&lt;&gt;();        </span><br><span class="line">        Core.split(hello, bgrPlanes);        </span><br><span class="line">        </span><br><span class="line">        MatOfFloat histRange = <span class="keyword">new</span> MatOfFloat(<span class="number">0</span>, <span class="number">256</span>);</span><br><span class="line">        <span class="keyword">int</span> histSize = <span class="number">256</span>;</span><br><span class="line">        <span class="comment">//MatOfInt channels = new MatOfInt(0);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> accumulate = <span class="keyword">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Mat histImg1 = new Mat();        </span></span><br><span class="line">        Mat bHist = <span class="keyword">new</span> Mat(), gHist = <span class="keyword">new</span> Mat(), rHist = <span class="keyword">new</span> Mat();</span><br><span class="line">        </span><br><span class="line">        Imgproc.calcHist(bgrPlanes, <span class="keyword">new</span> MatOfInt(<span class="number">0</span>), <span class="keyword">new</span> Mat(), bHist, <span class="keyword">new</span> MatOfInt(histSize),histRange,accumulate);</span><br><span class="line">        Imgproc.calcHist(bgrPlanes, <span class="keyword">new</span> MatOfInt(<span class="number">1</span>), <span class="keyword">new</span> Mat(), gHist, <span class="keyword">new</span> MatOfInt(histSize), histRange, accumulate);</span><br><span class="line">        Imgproc.calcHist(bgrPlanes, <span class="keyword">new</span> MatOfInt(<span class="number">2</span>), <span class="keyword">new</span> Mat(), rHist, <span class="keyword">new</span> MatOfInt(histSize), histRange, accumulate);        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> histW = <span class="number">512</span>, histH = <span class="number">400</span>;</span><br><span class="line">        <span class="keyword">int</span> binW = (<span class="keyword">int</span>) Math.round((<span class="keyword">double</span>) histW / histSize);</span><br><span class="line"></span><br><span class="line">        Mat histImage = <span class="keyword">new</span> Mat( histH, histW, CvType.CV_8UC3, <span class="keyword">new</span> Scalar( <span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>) );        </span><br><span class="line">       </span><br><span class="line">        Core.normalize(bHist, bHist, <span class="number">0</span>, histImage.rows()-<span class="number">20</span>, Core.NORM_MINMAX);</span><br><span class="line">        Core.normalize(gHist, gHist, <span class="number">0</span>, histImage.rows()-<span class="number">20</span>, Core.NORM_MINMAX);</span><br><span class="line">        Core.normalize(rHist, rHist, <span class="number">0</span>, histImage.rows()-<span class="number">20</span>, Core.NORM_MINMAX);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">float</span>[] bHistData = <span class="keyword">new</span> <span class="keyword">float</span>[(<span class="keyword">int</span>) (bHist.total() * bHist.channels())];</span><br><span class="line">        bHist.get(<span class="number">0</span>, <span class="number">0</span>, bHistData);</span><br><span class="line">        System.out.println(Arrays.toString(bHistData));</span><br><span class="line">        <span class="keyword">float</span>[] gHistData = <span class="keyword">new</span> <span class="keyword">float</span>[(<span class="keyword">int</span>) (gHist.total() * gHist.channels())];</span><br><span class="line">        gHist.get(<span class="number">0</span>, <span class="number">0</span>, gHistData);</span><br><span class="line">        <span class="keyword">float</span>[] rHistData = <span class="keyword">new</span> <span class="keyword">float</span>[(<span class="keyword">int</span>) (rHist.total() * rHist.channels())];</span><br><span class="line">        rHist.get(<span class="number">0</span>, <span class="number">0</span>, rHistData);</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt; histSize; i++ ) &#123;            </span><br><span class="line">            Imgproc.line(histImage, <span class="keyword">new</span> Point(binW * (i - <span class="number">1</span>), histH - Math.round(bHistData[i - <span class="number">1</span>])),<span class="keyword">new</span> Point(binW * (i), histH - Math.round(bHistData[i])), <span class="keyword">new</span> Scalar(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">2</span>);</span><br><span class="line">            Imgproc.line(histImage, <span class="keyword">new</span> Point(binW * (i - <span class="number">1</span>), histH - Math.round(gHistData[i - <span class="number">1</span>])),<span class="keyword">new</span> Point(binW * (i), histH - Math.round(gHistData[i])), <span class="keyword">new</span> Scalar(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>);</span><br><span class="line">            Imgproc.line(histImage, <span class="keyword">new</span> Point(binW * (i - <span class="number">1</span>), histH - Math.round(rHistData[i - <span class="number">1</span>])),<span class="keyword">new</span> Point(binW * (i), histH - Math.round(rHistData[i])), <span class="keyword">new</span> Scalar(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>);</span><br><span class="line">        &#125;        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//imshow(histImage, "histImage");</span></span><br><span class="line">        HighGui.imshow(<span class="string">"histImage"</span>, histImage);</span><br><span class="line">        HighGui.imshow(<span class="string">"hello"</span>, hello);</span><br><span class="line">        HighGui.waitKey(<span class="number">0</span>);</span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/lena.jpg" alt=""><br><img src="/images/601.png" alt=""><br>观察上面的直方图可以看到，blue通道与green通道的直方图偏向左边，而red通道的直方图偏向右边；如果我们显示单通道的图像，估计blue通道与green通道的图像偏黑，而red通道的图像偏白<br><img src="/images/1920.png" alt=""></p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/图像处理/" rel="tag"><i class="fas fa-tags"></i>图像处理</a>
        
        <a class="post-tag button" href="/tags/opencv/" rel="tag"><i class="fas fa-tags"></i>opencv</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/26/opencv4-0-0图像处理：运动目标检测（六）/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/26/opencv4-0-0图像处理：运动目标检测（六）/" itemprop="url">opencv4.0.0图像处理：运动目标检测（六）</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-26T10:43:25+08:00">2019-05-26 10:43:25</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>opencv自带了运动目标检测的接口，这里测试一段视频检测效果<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub		</span></span><br><span class="line">		</span><br><span class="line">		BackgroundSubtractorMOG2 fgbg = Video.createBackgroundSubtractorMOG2();</span><br><span class="line">		</span><br><span class="line">		Mat fgmask = <span class="keyword">new</span> Mat();</span><br><span class="line">		<span class="comment">//fgbg.apply(image, fgmask);</span></span><br><span class="line">		</span><br><span class="line">		 VideoCapture capture = <span class="keyword">new</span> VideoCapture(<span class="string">"images/target2.mp4"</span>);</span><br><span class="line">	        <span class="keyword">if</span> (!capture.isOpened()) &#123;</span><br><span class="line">	            System.err.println(<span class="string">"--(!)Error opening video capture"</span>);</span><br><span class="line">	            System.exit(<span class="number">0</span>);</span><br><span class="line">	        &#125;</span><br><span class="line"></span><br><span class="line">	        Mat frame = <span class="keyword">new</span> Mat();</span><br><span class="line">	        <span class="keyword">while</span> (capture.read(frame)) &#123;</span><br><span class="line">	            <span class="keyword">if</span> (frame.empty()) &#123;</span><br><span class="line">	                System.err.println(<span class="string">"--(!) No captured frame -- Break!"</span>);</span><br><span class="line">	                <span class="keyword">break</span>;</span><br><span class="line">	            &#125;</span><br><span class="line"></span><br><span class="line">	            <span class="comment">//-- 3. Apply the classifier to the frame</span></span><br><span class="line">	            fgbg.apply(frame, fgmask);</span><br><span class="line">	            </span><br><span class="line">	            HighGui.imshow(<span class="string">"原图"</span>, frame);</span><br><span class="line">	            </span><br><span class="line">	            HighGui.imshow(<span class="string">"检测目标"</span>, fgmask);</span><br><span class="line">	            </span><br><span class="line"></span><br><span class="line">	            <span class="keyword">if</span> (HighGui.waitKey(<span class="number">10</span>) == <span class="number">27</span>) &#123;</span><br><span class="line">	                <span class="keyword">break</span>;<span class="comment">// escape</span></span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line"></span><br><span class="line">	        System.exit(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/04722.png" alt=""> </p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/图像处理/" rel="tag"><i class="fas fa-tags"></i>图像处理</a>
        
        <a class="post-tag button" href="/tags/opencv/" rel="tag"><i class="fas fa-tags"></i>opencv</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/25/opencv4-0-0图像处理：二维码扫描器java版（五）/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/25/opencv4-0-0图像处理：二维码扫描器java版（五）/" itemprop="url">opencv4.0.0图像处理：二维码扫描器java版（五）</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-25T10:34:25+08:00">2019-05-25 10:34:25</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>浏览到某英文网页上提供了基于opencv的C++和python版的二维码扫描器，其链接为<a href="https://www.learnopencv.com/opencv-qr-code-scanner-c-and-python/" title="二维码扫描器" target="_blank" rel="noopener">https://www.learnopencv.com/opencv-qr-code-scanner-c-and-python/</a>，不过貌似没有java版的，未免遗憾 </p>
<p>这里本人依样画葫芦，仿造了java版本的二维码扫描器，方为完备 </p>
<p>代码如下： </p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">	System.loadLibrary(Core.NATIVE_LIBRARY_NAME);</span><br><span class="line"></span><br><span class="line">	Mat image = imread(<span class="string">"images/qrcode-feature.jpg"</span>);</span><br><span class="line">	QRCodeDetector detector = <span class="keyword">new</span> QRCodeDetector();</span><br><span class="line">	Mat points = <span class="keyword">new</span> Mat();</span><br><span class="line">	Mat straight_qrcode = <span class="keyword">new</span> Mat();</span><br><span class="line">	String data = detector.detectAndDecode(image, points, straight_qrcode);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		System.out.println(<span class="string">"Decoded Data :"</span> + data);</span><br><span class="line"></span><br><span class="line">		display(image, points);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// HighGui.imshow("points", points);</span></span><br><span class="line">		straight_qrcode.convertTo(straight_qrcode, CvType.CV_8UC3);</span><br><span class="line">		</span><br><span class="line">		HighGui.imshow(<span class="string">"Rectified QRCode"</span>, straight_qrcode);</span><br><span class="line"></span><br><span class="line">		HighGui.waitKey(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	System.exit(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(Mat image, Mat points)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n = points.rows();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		Imgproc.line(image, <span class="keyword">new</span> Point(points.get(i, <span class="number">0</span>)), <span class="keyword">new</span> Point(points.get((i + <span class="number">1</span>) % n, <span class="number">0</span>)),</span><br><span class="line">				<span class="keyword">new</span> Scalar(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">3</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	HighGui.imshow(<span class="string">"Result"</span>, image);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试输出 </p>
<p>Decoded Data :<a href="http://LearnOpenCV.com" target="_blank" rel="noopener">http://LearnOpenCV.com</a></p>
<p>二维码定位： </p>
<p><img src="/images/0525104330.png" alt=""> </p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/图像处理/" rel="tag"><i class="fas fa-tags"></i>图像处理</a>
        
        <a class="post-tag button" href="/tags/opencv/" rel="tag"><i class="fas fa-tags"></i>opencv</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/21/opencv4-0-0图像处理：图像目标尺寸检测java版（四）/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/21/opencv4-0-0图像处理：图像目标尺寸检测java版（四）/" itemprop="url">opencv4.0.0图像处理：图像目标尺寸检测java版（四）</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-21T08:24:21+08:00">2019-05-21 08:24:21</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>以前在网上浏览到一篇英文文章，讲的是如何利用opencv实现图像目标尺寸检测，不过原文的实现代码是python；对于java程序员来说不方便调用，故本人采用java语言实现了同样的功能（由于精力及技术问题，延至今日才有java版本的实现），代码未有完善之处，如相关方法的参数值等，尚需后续补充 </p>
<p>原文地址：<a href="https://www.pyimagesearch.com/2016/03/28/measuring-size-of-objects-in-an-image-with-opencv/" target="_blank" rel="noopener">https://www.pyimagesearch.com/2016/03/28/measuring-size-of-objects-in-an-image-with-opencv/</a><br>在此感谢原作者及网上相关参考文章（特别是雷锋网的翻译版本，貌似链接已经失效） </p>
<p>其基本思路是先获取图片中图像目标的轮廓，然后获取其旋转矩阵，并对旋转矩阵的坐标顺时针排序，然后获取其矩阵边框的中点坐标，最后是计算对称中点的欧氏距离（像素），最后再根据参照物的像素与英寸的比例计算实际距离 </p>
<p>部分java代码 </p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图像目标尺寸检测</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//Mat image = imread("images/test6.png");</span></span><br><span class="line">		Mat image = imread(<span class="string">"images/example_01.png"</span>);</span><br><span class="line">		Mat gray = <span class="keyword">new</span> Mat();</span><br><span class="line">		Imgproc.cvtColor(image, gray, Imgproc.COLOR_BGR2GRAY);</span><br><span class="line">		</span><br><span class="line">		Imgproc.GaussianBlur(gray, gray, <span class="keyword">new</span> Size(<span class="number">7</span>,<span class="number">7</span>), <span class="number">0</span>);</span><br><span class="line">		</span><br><span class="line">		Mat edges = <span class="keyword">new</span> Mat();</span><br><span class="line">		Imgproc.Canny(image, edges, <span class="number">50</span>, <span class="number">150</span>);</span><br><span class="line">		<span class="comment">//Imgproc.Canny(image, edges,100.0, 200.0,3,true);</span></span><br><span class="line">		</span><br><span class="line">		Mat kernel1=Imgproc.getStructuringElement(Imgproc.MORPH_RECT, <span class="keyword">new</span> Size(<span class="number">8</span>,<span class="number">8</span>), <span class="keyword">new</span> Point(<span class="number">4</span>,<span class="number">4</span>));</span><br><span class="line">		Imgproc.dilate(edges, edges, kernel1 ,<span class="keyword">new</span> Point(-<span class="number">1</span>,-<span class="number">1</span>),<span class="number">1</span>);</span><br><span class="line">		</span><br><span class="line">		Mat kernel=Imgproc.getStructuringElement(Imgproc.MORPH_RECT, <span class="keyword">new</span> Size(<span class="number">9</span>,<span class="number">9</span>), <span class="keyword">new</span> Point(-<span class="number">1</span>,-<span class="number">1</span>));</span><br><span class="line">		Imgproc.erode(edges, edges, kernel,<span class="keyword">new</span> Point(-<span class="number">1</span>,-<span class="number">1</span>),<span class="number">1</span>);	</span><br><span class="line">		</span><br><span class="line">		List&lt;MatOfPoint&gt; contours = <span class="keyword">new</span> ArrayList&lt;MatOfPoint&gt;();</span><br><span class="line">		Imgproc.findContours(edges.clone(), contours, <span class="keyword">new</span> Mat(), Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE);</span><br><span class="line">		<span class="comment">//……</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>最后效果如图：<br><img src="/images/example1.png" alt=""> </p>
<p>我们发现，其中的测量对象的尺寸并不是百分之百准确，原文分析了两个原因： </p>
<p>1）图像的拍摄视角问题，不是绝对的90度角度 </p>
<p>2）拍摄相机的相关参数校准问题 </p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/图像处理/" rel="tag"><i class="fas fa-tags"></i>图像处理</a>
        
        <a class="post-tag button" href="/tags/opencv/" rel="tag"><i class="fas fa-tags"></i>opencv</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/19/opencv4-0-0图像处理：人脸识别（三）/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/19/opencv4-0-0图像处理：人脸识别（三）/" itemprop="url">opencv4.0.0图像处理：人脸识别（三）</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-19T09:50:48+08:00">2019-05-19 09:50:48</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>opencv官方自带了人脸识别的模型，这里测试一下效果<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 人脸识别测试</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		CascadeClassifier classifier = <span class="keyword">new</span> CascadeClassifier(<span class="string">"haarcascade_frontalface_alt.xml"</span>);</span><br><span class="line"></span><br><span class="line">		Mat image = Imgcodecs.imread(<span class="string">"images/chuanpu.png"</span>);</span><br><span class="line"></span><br><span class="line">		MatOfRect faces = <span class="keyword">new</span> MatOfRect();</span><br><span class="line">		classifier.detectMultiScale(image, faces);</span><br><span class="line"></span><br><span class="line">		Rect[] rects = faces.toArray();</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">"识别人脸数："</span> + rects.length);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rects.length; i++) &#123;</span><br><span class="line">			Imgproc.rectangle(image, <span class="keyword">new</span> Point(rects[i].x, rects[i].y),</span><br><span class="line">					<span class="keyword">new</span> Point(rects[i].x + rects[i].width, rects[i].y + rects[i].height), <span class="keyword">new</span> Scalar(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>);</span><br><span class="line">			Imgproc.putText(image, <span class="string">"Human"</span>, <span class="keyword">new</span> Point(rects[i].x, rects[i].y), Imgproc.FONT_HERSHEY_PLAIN, <span class="number">1.0</span>,</span><br><span class="line">					<span class="keyword">new</span> Scalar(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>, Imgproc.LINE_AA, <span class="keyword">false</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		imwrite(<span class="string">"output/face2.png"</span>, image);		</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/face6.png" alt=""> </p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/图像处理/" rel="tag"><i class="fas fa-tags"></i>图像处理</a>
        
        <a class="post-tag button" href="/tags/opencv/" rel="tag"><i class="fas fa-tags"></i>opencv</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/19/opencv4-0-0图像处理：使用轮廓进行边缘检测（二）/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/19/opencv4-0-0图像处理：使用轮廓进行边缘检测（二）/" itemprop="url">opencv4.0.0图像处理：使用轮廓进行边缘检测（二）</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-19T09:13:22+08:00">2019-05-19 09:13:22</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>本文在边缘检测的基础上继续，即将上文边缘检测的结果（矩阵）输入，然后进一步发现轮廓并绘制<br>这里先将opencv库的加载设置为类的静态代码块，在相关方法代码体里面不再声明<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			NativeLoader.loadLibrary(Core.NATIVE_LIBRARY_NAME);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p>下面是轮廓绘制的相关方法<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 发现轮廓</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> image</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> onBlank</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> List&lt;MatOfPoint&gt; <span class="title">find_contours</span><span class="params">(Mat image, <span class="keyword">boolean</span> onBlank)</span> </span>&#123;</span><br><span class="line">        Mat imageBW = <span class="keyword">new</span> Mat();</span><br><span class="line"></span><br><span class="line">        Imgproc.cvtColor(image, imageBW, Imgproc.COLOR_BGR2GRAY);</span><br><span class="line">        Imgproc.Canny(imageBW,imageBW,<span class="number">100.0</span>,<span class="number">300.0</span>,<span class="number">3</span>, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;MatOfPoint&gt; contours = <span class="keyword">new</span> ArrayList&lt;MatOfPoint&gt;();</span><br><span class="line">        Imgproc.findContours(imageBW, contours, <span class="keyword">new</span> Mat(), Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_NONE);</span><br><span class="line">        <span class="keyword">return</span> contours;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Scalar BLACK = <span class="keyword">new</span> Scalar(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) ;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 绘制轮廓</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> originalMat</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> contours</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> thickness</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> Mat <span class="title">draw_contours</span><span class="params">(Mat originalMat, List&lt;MatOfPoint&gt; contours, <span class="keyword">int</span> thickness)</span> </span>&#123;</span><br><span class="line">        Mat target =</span><br><span class="line">          <span class="keyword">new</span> Mat(originalMat.height(), originalMat.width(), CvType.CV_8UC3, WHITE);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; contours.size(); i++)</span><br><span class="line">            Imgproc.drawContours(target, contours, i, BLACK, thickness);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发现及绘制轮廓</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	Mat kittens = imread(<span class="string">"images/three_black_kittens.jpg"</span>);</span><br><span class="line">	List&lt;MatOfPoint&gt; contours = find_contours(kittens, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">      Mat target = draw_contours(kittens, contours, <span class="number">7</span>);</span><br><span class="line">      imwrite(<span class="string">"output/kittens-contours-7.png"</span>, target);</span><br><span class="line"></span><br><span class="line">      Mat masked = mask_on_bg(target, <span class="string">"images/light-blue-gradient.jpg"</span>);</span><br><span class="line">      imwrite(<span class="string">"output/kittens-masked.png"</span>, masked);</span><br><span class="line"></span><br><span class="line">      target = draw_contours(kittens, contours, <span class="number">3</span>);</span><br><span class="line">      imwrite(<span class="string">"output/kittens-contours-3.png"</span>, target);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原图<br><img src="/images/three_black_kittens.jpg" alt=""><br>处理后<br><img src="/images/kittens-contours-3.png" alt=""><br><img src="/images/kittens-contours-7.png" alt=""><br>下面是使用掩模的输出<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> Mat <span class="title">mask_on_bg</span><span class="params">(Mat mask, String backgroundFilePath)</span> </span>&#123;</span><br><span class="line">        Mat target = <span class="keyword">new</span> Mat(mask.height(),mask.width(),CvType.CV_8UC3,WHITE);</span><br><span class="line">        Mat bg = imread(backgroundFilePath);</span><br><span class="line">        Imgproc.resize(bg, bg, target.size());</span><br><span class="line">        bg.copyTo(target, mask);</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p> <img src="/images/kittens-masked.png" alt=""> </p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/图像处理/" rel="tag"><i class="fas fa-tags"></i>图像处理</a>
        
        <a class="post-tag button" href="/tags/opencv/" rel="tag"><i class="fas fa-tags"></i>opencv</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/18/opencv4.0.0图像处理：边缘检测（一）/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/18/opencv4.0.0图像处理：边缘检测（一）/" itemprop="url">opencv4.0.0图像处理：边缘检测（一）</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-18T09:17:45+08:00">2019-05-18 09:17:45</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/opencv/" itemprop="url" rel="index"><span itemprop="name">opencv</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>opencv是一个C++语言库，对于java程序员来说，貌似不是很友好；不过java程序员可以利用jni调用的方式来处理 </p>
<p>for example:</p>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main1</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        NativeLoader.loadLibrary(Core.NATIVE_LIBRARY_NAME);</span><br><span class="line">        Mat hello = Mat.eye(<span class="number">150</span>, <span class="number">150</span>, CvType.CV_8SC3);</span><br><span class="line">        System.out.println(hello.dump());</span><br><span class="line">        hello.setTo(<span class="keyword">new</span> Scalar(<span class="number">180</span>,<span class="number">80</span>,<span class="number">250</span>));</span><br><span class="line">        Mat sub=hello.submat(<span class="number">0</span>,<span class="number">50</span>,<span class="number">0</span>,<span class="number">50</span>);</span><br><span class="line">        sub.setTo(<span class="keyword">new</span> Scalar(<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>));</span><br><span class="line">        <span class="comment">//imwrite("E:\\idea-workspace\\hellocv\\dev\\hello.png",hello);</span></span><br><span class="line">        <span class="comment">//System.out.println(hello.dump());</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 边缘检测算子</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       NativeLoader.loadLibrary(Core.NATIVE_LIBRARY_NAME);</span><br><span class="line">       Mat tools=Imgcodecs.imread(<span class="string">"images/tools.jpg"</span>);</span><br><span class="line">       Imgproc.cvtColor(tools, tools, Imgproc.COLOR_RGB2GRAY);</span><br><span class="line">       Imgproc.Canny(tools, tools,<span class="number">100.0</span>, <span class="number">300.0</span>,<span class="number">3</span>,<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">       Mat invetedTools=tools.clone();</span><br><span class="line">       bitwise_not(invetedTools, invetedTools);</span><br><span class="line">       Imgcodecs.imwrite(<span class="string">"output/tools-04.png"</span>, invetedTools);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p> <img src="/images/tools.jpg" alt=""><br><img src="/images/tools-04.png" alt=""> </p>
<p>图像掩模<br><figure class="hljs highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Scalar WHITE = <span class="keyword">new</span> Scalar(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>);</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 图像掩模</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		</span><br><span class="line">		NativeLoader.loadLibrary(Core.NATIVE_LIBRARY_NAME);</span><br><span class="line">		</span><br><span class="line">		Mat kittens = imread(<span class="string">"images/tools.jpg"</span>);</span><br><span class="line"></span><br><span class="line">		Imgproc.cvtColor(kittens, kittens, Imgproc.COLOR_RGB2GRAY);</span><br><span class="line">		Imgproc.Canny(kittens, kittens, <span class="number">100.0</span>, <span class="number">300.0</span>, <span class="number">3</span>, <span class="keyword">true</span>);</span><br><span class="line">		bitwise_not(kittens, kittens);</span><br><span class="line">		<span class="comment">// System.out.println(kittens.dump());</span></span><br><span class="line"></span><br><span class="line">		Mat target = <span class="keyword">new</span> Mat(kittens.height(), kittens.width(), CvType.CV_8UC3, WHITE);</span><br><span class="line">		Mat bg = imread(<span class="string">"images/light-blue-gradient.jpg"</span>);</span><br><span class="line">		Imgproc.resize(bg, bg, target.size());</span><br><span class="line">		bg.copyTo(target, kittens);		</span><br><span class="line"></span><br><span class="line">		imwrite(<span class="string">"output/kittens-03.png"</span>, target);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/kittens-03.png" alt=""> </p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/图像处理/" rel="tag"><i class="fas fa-tags"></i>图像处理</a>
        
        <a class="post-tag button" href="/tags/opencv/" rel="tag"><i class="fas fa-tags"></i>opencv</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/14/抽取网易公开课中英文字幕及合并、同步等/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/14/抽取网易公开课中英文字幕及合并、同步等/" itemprop="url">抽取网易公开课中英文字幕及合并、同步等</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-14T08:05:59+08:00">2019-05-14 08:05:59</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>最近网易公开课的视频接口做了修改，貌似没有提供m3u8文件地址，因此不能像以前可以下载高清视频 </p>
<p>不过现在提供了部分视频的中英文字幕地址（需要解析），如果下载到本地，需要自己处理文件合并与同步，以及时间延迟等问题 </p>
<p>折腾了一会，终于搞定，以后可以自己勘误本地字幕文件 </p>
<p>比如信号处理视频的字幕文件，本人已下载并合并，并调整了时间延迟，确保跟下载视频文件同步 </p>
<p><img src="/images/20190514081708.png" alt=""><br><img src="/images/20190514082317.png" alt=""> </p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/字幕/" rel="tag"><i class="fas fa-tags"></i>字幕</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/12/信号调制及复指数载波、正弦载波及脉冲载波/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/12/信号调制及复指数载波、正弦载波及脉冲载波/" itemprop="url">信号调制及复指数载波、正弦载波及脉冲载波</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-12T04:40:27+08:00">2019-05-12 04:40:27</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/信号与系统/" itemprop="url" rel="index"><span itemprop="name">信号与系统</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>信号滤波及调制等，通常基于傅里叶变换属性；滤波器的理论依据在于时域信号的卷积等于相对应的频域的乘积；调制的理论依据在于时域信号的乘积等于相对应的频域的卷积；（貌似有点抽象） </p>
<p>本文讨论信号的调制，</p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/数字信号处理/" rel="tag"><i class="fas fa-tags"></i>数字信号处理</a>
        
        <a class="post-tag button" href="/tags/傅里叶变换/" rel="tag"><i class="fas fa-tags"></i>傅里叶变换</a>
        
        <a class="post-tag button" href="/tags/卷积/" rel="tag"><i class="fas fa-tags"></i>卷积</a>
        
      </div>
      
    </footer>
  </article>
  
  <article class="article post card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/12/古汉语中的词类活用及其语义功能/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="hedgehog">
        <meta itemprop="description" content="程序爱好者">
        <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="chenying99'blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link post-title-link-external" href="/2019/05/12/古汉语中的词类活用及其语义功能/" itemprop="url">古汉语中的词类活用及其语义功能</a>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-05-12T04:35:40+08:00">2019-05-12 04:35:40</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/语言学/" itemprop="url" rel="index"><span itemprop="name">语言学</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      
      <p>在古汉语中，词类活用是一种较为普遍的语法现象，如形容词作动词、名词作动词、名词作状语等</p>
<p>以往的语言教学对这些词类活用现象，诸如解释为意动用法、使动用法等，解释比较笼统</p>
<p><strong>形容词作动词，使动用法</strong></p>
<p>例句：</p>
<p>1）春风又绿江南岸<br>2）白了少年头<br>3）红了樱桃，绿了芭蕉<br>4) 富润室，德润身，心广体胖，故君子必诚其意</p>
<p>传统语法将上面的句子中的形容词作动词，通常解释为使动用法；这个解释当然没有问题，不过本人觉得还是解释得比较笼统</p>
<p>如果参考动词框架语言及卫星框架语言中的分析，上述语法现象可以考虑进一步解释</p>
<p>词类活用现象，它相当于补充了动作之外的其他信息，诸如原因、效果、方式、处所等</p>
<p>形容词作动词，即使动用法，它通常表示动作+效果</p>
<p>上面的句子貌似为致使事件，与位移事件具有同源性，即都表示状态的变化；</p>
<p><strong>形容词作动词，意动用法</strong></p>
<p>例句：</p>
<p>5）然则吾大天地而小豪末，可乎？《庄子》<br>6）吾妻之美我者，私我也；妾之美我者，畏我也；客之美我者，欲有求于我也。《战国策·齐策》<br>7）是故明君贵五谷而贱金玉《论贵粟疏》<br>8）甘其食，美其服，安其居，乐其俗《老子》</p>
<p>上面句子传统解释为意动用法，亦可解释为动作+效果</p>
<p><strong>名词用作动词，通常表示方式、工具、处所等</strong></p>
<p>9）左右欲刃相如《史记》<br>10）卒中往往语，皆指目陈胜《史记》<br>11）假舟楫者，非能水也《荀子》<br>12）策之不以其道《马说》</p>
<p><strong>名词作状语，则似乎更明显</strong></p>
<p>13）天下云集响应,赢粮而景从《过秦论》<br>14）嫂蛇形匍匐《战国策·秦策》<br>15）君为我呼入,吾得兄事之《史记·项羽本纪》<br>16）叩石垦壤,箕畚运于渤海之尾《列子·汤问》<br>17）妾在巫山之阳,高丘之岨,旦为行云,暮为行雨,朝朝暮暮,阳台之下《高唐赋》</p>
<p>名词作状语，通常表示方式、工具、时间、处所等</p>
<p>……</p>

      
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/隐喻/" rel="tag"><i class="fas fa-tags"></i>隐喻</a>
        
      </div>
      
    </footer>
  </article>
  
  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fas fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fas fa-angle-right" aria-label="下一页"></i></a>
  </nav>
  
  
  

<div class="comments" id="comments">
  
  
  
</div>



  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control"/>
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/avatar.png" alt="hedgehog">
  
  <h1 class="author-name">hedgehog</h1>
  <h2 class="author-description">程序爱好者</h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">归档</div>
      <div><a href="/archives/">60</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">分类</div>
      <div><a href="/categories/">10</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">标签</div>
      <div><a href="/tags/">25</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="/atom.xml"><i class="fas fa-rss"></i>RSS</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>社交链接</p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="mailto:chenying998179@foxmail.com" target="_blank">E-Mail</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/" target="_blank">GitHub</a></li>
        
        <li><i class="fab fa-weibo"></i><a href="https://weibo.com/" target="_blank">Weibo</a></li>
        
      </ul>
    </div>
    
    
    <hr>
    <div class="blogroll sidebar-item">
      <div><i class="fas fa-link"></i>友情链接</div>
      <ul>
        
        <li><i class="fas fa-link"></i><a href="https://github.com/" target="_blank">GitHub</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://developer.mozilla.org/" target="_blank">MDN</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks</a></li>
        
      </ul>
    </div>
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #33363b;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="回到顶部"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">hedgehog</span><span class="year"><i class="far fa-copyright"></i>2022</span>
        </div>
        
        <div class="busuanzi">
          <span id="busuanzi_container_site_pv"><i class="fas fa-eye" aria-label="站点点击量" aria-hidden="false"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user" aria-label="站点用户数" aria-hidden="false"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv" aria-label="页面点击量" aria-hidden="false"></span></span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动 | 主题 <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
